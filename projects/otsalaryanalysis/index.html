<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>OT Salary Analysis - λ∇</title>
<meta name="description" content="The Gradient of Me is a personal website dedicated to learning fundamental concepts in machine learning, data science, and computer science.">


  <meta name="author" content="Yingfu (Ben) Ma">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="λ∇">
<meta property="og:title" content="OT Salary Analysis">
<meta property="og:url" content="/projects/otsalaryanalysis/">


  <meta property="og:description" content="The Gradient of Me is a personal website dedicated to learning fundamental concepts in machine learning, data science, and computer science.">











  

  


<link rel="canonical" href="/projects/otsalaryanalysis/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Yingfu Ma",
      "url": "/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="λ∇ Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--archive">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          λ∇
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/projectspage/">Work</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/">Blog</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  

  <div class="archive">
    
      <h1 id="page-title" class="page__title">OT Salary Analysis</h1>
    
    <p>One of my friends is studying occupational therapy (OT), and took a survey with lots of data pertaining to OT salaries. This was data submitted to OTsalary.com where users could download the data and perform their own analyses. The site shows basic analyses such as finding the mean from a spreadsheet, but I decided to take a deeper exploratory approach to the data. The original dataset consisted of 2376 raw survey responses.</p>

<p>The hover functionality is available in the jupyter notebook linked in this <a href="https://github.com/yma3/OT-Salary-Analysis-and-Prediction">github responsitory</a>.</p>

<p style="text-align:center"><img src="/assets/images/otsalary/scatterresponse.png" alt="ScatterResponse" />
<img src="/assets/images/otsalary/responseheatmap.png" alt="ResponseHeatmap" />
<img src="/assets/images/otsalary/medianincomeheatmap.png" alt="MedianIncomeHeatmap" /></p>

<h3 id="exploratory-data-analysis">Exploratory Data Analysis</h3>
<p>Preliminary EDA showed inconsistencies in the input. For example, there were several instances where annual salaries were much larger when compared to their per hour pay. Conversely, there were salaries extremely low with very high per hour pay. Other issues were inputting numbers such as “74” for salary to possibly indicate 74k or 74,000, or not specifying currency when the responses were international. Overall, these responses were omitted. I also restrict this analysis to US responses, as those were a significant majority of the responses. This results in a dataset of 2176 responses.</p>

<p>If we split the data into groups, we can see the different class distributions. We look at education, type of OT, location, and type of payrate.</p>

<p style="text-align:center"><img src="/assets/images/otsalary/education.png" alt="Education" /></p>

<p style="text-align:center"><img src="/assets/images/otsalary/otcota.png" alt="OtCota" />
<img src="/assets/images/otsalary/payrates.png" alt="Payrates" /></p>

<h3 id="analysis-of-a-gender-wage-gap">Analysis of a Gender Wage Gap</h3>

<p>With these salaries, I wanted to determine whether or not there was a gender wage gap. Spoiler: there is.</p>

<p>We begin by omitting responses that did not prefer to list their gender. We also compare individuals with the same education (masters degrees) and are OTs, because that group consists of the largest number of people. This totals to 114 male responses, 1234 female responses, and 1348 total responses. We can calculate the mean and variance of the salaries, and then apply statistical tests to both.</p>

<p style="text-align:center"><img src="/assets/images/otsalary/malefemalehist.png" alt="Female-Male Wage Gap" />
<img src="/assets/images/otsalary/mhistfhist.png" alt="Individual Histograms" /></p>

<p>On average, men make $72,991.55 and women make $66,219.02. The difference is $6772.53. This difference of the means is statistically significant, and we can see that by using both statistical tests as well as a permutation test. Our null hypothesis is that the difference of means is 0. Our alternate hypothesis is that they are not equal. (We could assume a one-sided test if we wanted to only see if women make less than men, but we choose the two-sided test for fairness to both genders.)</p>

<p>A Shapiro-Wilk test on the distribution of female salaries shows that it’s not gaussian, but with Levene’s test applied to both distributions, we see it’s homoscedastic (similar variance). With a large enough sample size we apply a two-sided t-test. This results in a p-value on the magnitude of 1e-08.</p>

<h3 id="permutation-test">Permutation Test</h3>

<p>We observe the same scenario when applying a permutation test to the data. We use a random sampling version of the permutation test for 20,000 iterations. By randomly shuffling the data, and calculating the means for the randomly shuffled groups, we can generate a histogram of the difference of means that approaches a gaussian distribution. This emulates what the difference of means would be if the two sets of data actually came from the same distribution.</p>

<p style="text-align:center"><img src="/assets/images/otsalary/permutationtest.png" alt="Permutation Test" /></p>

<p>By plotting the observed difference of means on this graph, we can see what are the random odds of observing that original difference. In this case, there were no data points from our permutation test that reached the original difference, thus our conclusion from the permutation test is that we have a p-value of 0. This closely resembles our result from our statistical t-test.</p>

<p>With both tests reaching the same conclusion, we can determine that from this dataset, female OTs with a masters degree make 9.28% less than male OTs with the same level of education.</p>

<h2 id="salary-prediction">Salary Prediction</h2>
<h3 id="decision-tree-model">Decision Tree Model</h3>
<p>With the data, I used XGBoost to create a gradient boosted decision tree model to predict the salary given a series of inputs. The input data to the tree is a vector with gender, type of OT, state of work, city-type (urban, rural, etc.), and type of pay (salaried, part time, etc.) as one-hot encoded vectors. Years of experience and education are given as ordinal numeric inputs.</p>

<p>The hyperparameters for the XGB regression model is specified in the jupyter notebook. With an 80-20 split on the data, the model has an RMSE of 13,979.83, and an R^2 of 0.464 which shows moderate correlation.</p>

<p>To optimize the hyperparameters, we apply randomized grid search to the gamma, colsample_bytree, subsample, reg_alpha, reg_lambda, learning_rate, and max_depth hyperparameters. We take 500 randomized points and select the optimal model which resulted in an MSE of 13,272.16 and an R^2 of 0.517. This is a slight improvement over the original model.</p>

<h3 id="visualizing-the-tree-model">Visualizing the Tree Model</h3>
<p>We can take our decision tree model and graph the splits. As this is an ensemble method, we have many trees working together. One such tree is shown.</p>

<p style="text-align:center"><img src="/assets/images/otsalary/decisiontreemodel.png" alt="DecisionTree" /></p>

<p>The node ‘f60’ corresponds to whether or not the job is part-time. ‘f64’ corresponds to Years of Experience. ‘F56’ is whether or not the person lives in a town. ‘f22’. corresponds to the state ‘MD’ or Maryland. ‘f61’ is if they have a per-visit type of pay, and ‘f42’ corresponds to the state ‘SC’ or South Carolina.</p>

<h2 id="references">References</h2>
<p>Data taken and analyzed from <a href="https://otsalary.com/">otsalary.com</a></p>

  </div>
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Yingfu Ma. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
